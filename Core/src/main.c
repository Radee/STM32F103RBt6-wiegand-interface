/* INCLUDES ******************************************************************************************************************************************************/
/********************************************************************************************************************************************************************/
#include "main.h"

/************************************************************************* MAIN ************************************************************************************/
/*********************************************************************************************************************************************************************/
int main(void)
{
	/*-------system_init-------*/

	//	RCC initialization
	Rcc_Init();
	//	GPIO initialization
	Gpio_Init();
	//	TIM1 initialization
	Timer_Init();

	/*-------functions-------*/

	BitePackageWaiting();

	/*-------while_loop-------*/
	while(1)
	{
	}
}

/* FUNCTIONS ****************************************************************************************************************************************************/
/*********************************************************************************************************************************************************************/

void TIM1_UP_IRQHandler(void)
{
	//	Clear TIM_SR_UIF flag
	TIM1->SR &=~ TIM_SR_UIF;

	// Check if initialization TIM1_UP_IRQHandler launch.
		// If not -  Clear vProcessing flag and set vBitePackageReceipt flag
	if(vSysInit)
			{	vProcessing = 0;		vBitePackageReceipt = 1;	}
		else
				vSysInit = 1;

}
/***************************************************************************/
/***************************************************************************/

void EXTI2_IRQHandler(void)
{
	//	Reset EXTI->PR->PR2 bite
	EXTI->PR = EXTI_IMR_IM2;

	// Check if initialization EXTI2_IRQHandler launch.
			// If not - launch BitRecive().
	if(vSysInit)	BitRecive(DATA_0);

}
/***************************************************************************/
/***************************************************************************/

void EXTI3_IRQHandler(void)
{
	//	Reset EXTI->PR->PR3 bite
	EXTI->PR = EXTI_IMR_IM3;

	// Check if initialization EXTI3_IRQHandler launch.
				// If not - launch BitRecive().
	if(vSysInit)	BitRecive(DATA_1);
}
/***************************************************************************/
/***************************************************************************/
